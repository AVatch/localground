{% extends base_template %}

{% block style_links %}
    <link rel="stylesheet" href="/static/css/twitter/bootstrap.css">
    <link rel="stylesheet" href="/static/css/jquery.fileupload-ui.css">
{% endblock %}
{% block jquery_version %}
    <!-- script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js"></script -->
	<script src="{{ JQUERY_PATH }}"></script>
{% endblock %}	
{% block script_links %}
    <script src="{{ JQUERY_UI_PATH }}"></script>
    <!-- script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script -->
    <script src="/static/scripts/site/uploader/jquery.fileupload.js"></script>
    
    <!-- for thumbnailing -->
    <script src="/static/scripts/site/uploader/load-image.min.js"></script>
    <script src="/static/scripts/site/uploader/canvas-to-blob.min.js"></script>
    <script src="/static/scripts/site/uploader/jquery.fileupload-ip.js"></script>
	<script type="text/javascript" src="/static/scripts/site/uploader/upload.js"></script>
{% endblock %}

{% block extra_styles %}
	{{block.super}}
	
	#uploaded > div {
		text-align:center;
		vertical-align:middle;
		height: 40px;
		position: absolute;
		top: 50%;
		margin-top: -20px;
		width: 100%;
	}
	
	#dropzone > div {
		text-align:center;
		vertical-align:middle;
		height: 100px;
		position: absolute;
		top: 40%;
		margin-top: -50px;
		width: 100%;
	}
	
	#uploaded, #dropzone {
		position: relative;
		border: 1px solid #eee;
		border: 1px solid rgba(0, 0, 0, 0.05);
		-webkit-border-radius: 4px;
		-moz-border-radius: 4px;
		border-radius: 4px;
		padding: 15px;
	}
    #dropzone {
        background: #EEEEEE;
        text-align: center;
        font-weight: bold;
		margin-bottom: 0px !important;
		background-color: #f5f5f5;
		-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
		-moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
		box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
    }
    #dropzone.in {
        width: 860px;
        height: 220px;
        font-size: larger;
    }
    #dropzone.hover {
        background: palegreen;
    }
    #dropzone.fade {
        -webkit-transition: all 0.3s ease-out;
        -moz-transition: all 0.3s ease-out;
        -ms-transition: all 0.3s ease-out;
        -o-transition: all 0.3s ease-out;
        transition: all 0.3s ease-out;
        opacity: 1;
    }

{% endblock %}
{% block extra_scripts %}
    {{block.super}}
    var o = new localground.uploader();
{% endblock %}
{% block pageload_scripts %}
	o.initialize({});    
{% endblock %}

{% block content %}    
    
    <div class="container" style="margin-top:20px;">
        <!-- div class="row fileupload-buttonbar">
            <div class="span12" style="width:900px;">
               
                <button type="submit" class="btn primary start"
						style="float:right;">
                    <i class="icon-upload icon-white"></i>
                    <span>Start upload</span>
                </button>
                
				<h4 style="float:left;margin-right:10px;">Select a Project:</h4>
				<select id="project" name="project">
					{% for p in projects %}
						<option value="{{p.id}}"
							{% if p.id == selected_project.id %}selected="true"{% endif %}>
								{{p.name}}
								{% if username == 'all' %}
									({{p.user.username}})
								{% endif %}
						</option>>
					{% endfor%}
				</select>
            </div>
        </div -->
		
		<ul class="nav nav-pills" style="margin-bottom:10px;">
			{% for media_type in media_types %}
				<li {% if selected_media_type.0 == media_type.0 %}class="active"{% endif %}>
					<a href="/upload/{{media_type.0}}/">{{media_type.1}}</a>
				</li>
			{% endfor %}
		</ul>
		
		<div class="row" style="margin-top:50px;">
			<div id="uploaded" class="span9" style="min-height:250px;display:inline-block; vertical-align:middle">
				<div style="font-size:20px;color:#666">No {{selected_media_type.1|lower}} uploaded yet</div>
			</div>
			<div id="dropzone" class="span5 well" style="font-weight: normal;width:300px;height:250px;">
				<div>
					Drag your {{selected_media_type.1|lower}} here
					<br>-or- <br>
					<span class="btn success fileinput-button" style="margin-top:10px;margin-bottom:10px;>
						<i class="icon-plus icon-white"></i>
						<span>Navigate to your {{selected_media_type.1|lower}}...</span>
						<input id="fileupload" type="file" name="files[]" multiple>
					</span>
					<br><small>Acceptable file types include: <br><span style="color:#333;font-weight:bold;">{{selected_media_type.2}}</span></small>
				</div>
			</div>
		</div>
		
		
		
		<div class="alert-message"
			 style="width:868px;display:none;margin-top:10px;margin-bottom:0px;">
			<a class="close" style="cursor:pointer">Ã—</a>
			<strong>Warning:</strong>
			<span id="alert-message-text"></span>
		</div>  
		
		
        <table id="display" class="table table-striped" style="display:none;width:900px;">
            <thead>
                <tr>
                    <th>&nbsp;</th>
                    <th>Preview</th>
                    <th>File Info</th>
                    <th>Project</th>
                    <th>File Type</th>
                    <th>Status</th>
					<th colspan="2">
						<button id="clear" type="reset" class="btn cancel">
							<i class="icon-ban-circle icon-dark"></i>
							<span>Clear</span>
						</button>	
					</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div id="results"></div>
    <select id="media_type" class="media_type" style="width:120px;display:none;">
        <!-- 1=attachment, 2=map, 3=photo, 4=audio, 5=video -->
        <option value="2">Map / Form</option>
        <option value="3">Photo</option>
    </select>
    
{% endblock %}
